{% comment %}
  Renders a collection card with text on top and image below.

  Accepts:
  - card_collection: {Object} Collection Liquid object
  - media_aspect_ratio: {String} Size of the product image card. Values are "square" and "portrait". Default is "square" (optional)
  - columns: {Number}
  - extend_height: {Boolean} Card height extends to available container space. Default: false (optional)
  - wrapper_class: {String} Wrapper class for card (optional)
  - placeholder_image: {String} Placeholder image when collection is empty (optional)

  Usage:
  {% render 'card-collection' %}
{% endcomment %}

{%- liquid
  assign ratio = 1
  if card_collection.featured_image and media_aspect_ratio == 'portrait'
    assign ratio = 0.8
  elsif card_collection.featured_image and media_aspect_ratio == 'adapt'
    assign ratio = card_collection.featured_image.aspect_ratio
  endif
  if ratio == 0 or ratio == null
    assign ratio = 1
  endif
  assign card_color_scheme = settings.card_color_scheme
  assign card_style = settings.card_style
  if wrapper_class == null or wrapper_class == 'none'
    assign card_color_scheme = settings.collection_card_color_scheme
    assign card_style = settings.collection_card_style
  endif
-%}

<div class="card-wrapper animate-arrow {{ wrapper_class | default: 'collection-card-wrapper' }}">
  <div class="
      card card--{{ card_style }}
      {% if card_style == 'card' %}color-{{ card_color_scheme }} gradient{% endif %}
      {% if extend_height %} card--extend-height{% endif %}
    "
  >
    <!-- Card Content (Title and Description) -->
    <div class="card__content card__content--top">
      <div class="card__information">
        <h3 class="card__heading">
          <a {% if card_collection == blank %}role="link" aria-disabled="true"{% else %}href="{{ card_collection.url }}"{% endif %} class="full-unstyled-link">
            {{ card_collection.title | default: 'Collection Title' | escape }}
          </a>
        </h3>
        {%- if card_collection.description != blank -%}
          <p class="card__caption">
            {{ card_collection.description | strip_html | truncatewords: 12 }}
          </p>
        {%- endif -%}
      </div>
    </div>

    <!-- Card Image Below Text -->
    {%- if card_collection.featured_image -%}
      <div class="card__media">
        <div class="media media--transparent media--hover-effect">
          <img
            src="{{ card_collection.featured_image | image_url: width: 1500 }}"
            alt="{{ card_collection.featured_image.alt | escape }}"
            class="motion-reduce"
            loading="lazy"
          >
        </div>
      </div>
    {%- else -%}
      <div class="card__media">
        {{ placeholder_image | placeholder_svg_tag: 'placeholder-svg' }}
      </div>
    {%- endif -%}
  </div>
</div>

<style>
  .card-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  .card__content--top {
    padding: 15px;
  }
  .card__heading {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 5px;
  }
  .card__caption {
    font-size: 1rem;
    color: #666;
  }
  .card__media img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }
</style>
